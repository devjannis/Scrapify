import requests
import logging
from models import *


class Scraper:
    def __init__(self, pid):
        self.pid = pid

    @staticmethod
    def _get_headers():
        return {
            "authority": "www.lego.com",
            "accept": "*/*",
            "accept-language": "de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7",
            "content-type": "application/json",
            "origin": "https://www.lego.com",
            "x-locale": "de-DE",
        }

    def _get_data(self):
        return {
            "operationName": "ProductDetails",
            "variables": {
                "slug": self.pid,
            },
            "query": "query ProductDetails($slug: String!, $visibility: ProductVisibility) {\n  product(slug: $slug, visibility: $visibility) {\n    ...ProductDetails_Product\n    ...ProductFeatures_Product\n    ...ProductUgc_Product\n    ...ProductOverview_Product\n    ...ProductMediaViewer_Media\n    ...Product_ProductItem\n    contentBody {\n      ...ContentContainerData\n      __typename\n    }\n    colorVariantProducts {\n      ... on ColorVariantProduct {\n        id\n        productCode\n        name\n        slug\n        primaryImage(size: THUMBNAIL)\n        overrideUrl\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment Product_ProductItem on Product {\n  __typename\n  id\n  productCode\n  name\n  slug\n  primaryImage(size: THUMBNAIL)\n  baseImgUrl: primaryImage\n  additionalImages {\n    url\n    tag\n    __typename\n  }\n  listingImages: listingAssets(type: IMAGE, limit: 2) {\n    ... on ListingProductAsset {\n      id\n      tag\n      url\n      thumbnailDimensions {\n        height\n        width\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  overrideUrl\n  ... on ReadOnlyProduct {\n    readOnlyVariant {\n      ...Variant_ReadOnlyProduct\n      __typename\n    }\n    __typename\n  }\n  ... on SingleVariantProduct {\n    variant {\n      ...Variant_ListingProduct\n      __typename\n    }\n    __typename\n  }\n  ... on MultiVariantProduct {\n    priceRange {\n      formattedPriceRange\n      formattedListPriceRange\n      __typename\n    }\n    variants {\n      ...Variant_ListingProduct\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment Variant_ListingProduct on ProductVariant {\n  id\n  sku\n  salePercentage\n  attributes {\n    rating\n    maxOrderQuantity\n    availabilityStatus\n    availabilityText\n    vipAvailabilityStatus\n    vipAvailabilityText\n    canAddToBag\n    canAddToWishlist\n    vipCanAddToBag\n    onSale\n    isNew\n    ageRange\n    pieceCount\n    safetyWarning {\n      safetyWarningKey: key\n      safetyWarningLabel: label\n      showSafetyImage\n      imageKey\n      __typename\n    }\n    ...ProductAttributes_Flags\n    __typename\n  }\n  ...ProductVariant_Pricing\n  __typename\n}\n\nfragment ProductVariant_Pricing on ProductVariant {\n  price {\n    formattedAmount\n    centAmount\n    currencyCode\n    formattedValue\n    __typename\n  }\n  insiderPrice {\n    formattedAmount\n    centAmount\n    currencyCode\n    formattedValue\n    __typename\n  }\n  priceDescription\n  listPrice {\n    formattedAmount\n    centAmount\n    __typename\n  }\n  attributes {\n    onSale\n    __typename\n  }\n  __typename\n}\n\nfragment ProductAttributes_Flags on ProductAttributes {\n  featuredFlags {\n    key\n    label\n    __typename\n  }\n  __typename\n}\n\nfragment Variant_ReadOnlyProduct on ReadOnlyVariant {\n  id\n  sku\n  attributes {\n    featuredFlags {\n      key\n      label\n      __typename\n    }\n    ageRange\n    pieceCount\n    __typename\n  }\n  __typename\n}\n\nfragment ContentContainerData on ContentContainer {\n  ...BaseContentContainer\n  section {\n    ...BaseContentSection\n    __typename\n  }\n  __typename\n}\n\nfragment BaseContentContainer on ContentContainer {\n  id\n  multivariate {\n    experimentId\n    entityId\n    testingId\n    inExperimentAudience\n    __typename\n  }\n  targeting {\n    fetchOnClient\n    __typename\n  }\n  __typename\n}\n\nfragment BaseContentSection on ContentSection {\n  __typename\n  id\n  layout {\n    width\n    colors {\n      background\n      __typename\n    }\n    __typename\n  }\n  ...CarouselContentSection\n  ...CustomCarouselContentSection\n  ...UserGeneratedContentData\n  ...AccordionSectionData\n  ...BreadcrumbSection\n  ...CategoryListingSection\n  ...ListingBannerSection\n  ...CardContent\n  ...CardCarouselContent\n  ...CopyContent\n  ...CopySectionData\n  ...QuickLinksData\n  ...ContentBlockMixedData\n  ...HeroBannerData\n  ...MotionBannerData\n  ...MotionSidekickData\n  ...InPageNavData\n  ...GalleryData\n  ...TableData\n  ...CountdownBannerData\n  ...RecommendationSectionData\n  ...SidekickBannerData\n  ...TextBlockData\n  ...TextBlockSEOData\n  ...CrowdTwistWidgetSection\n  ...CrowdTwistToggleWidgetSection\n  ...CrowdTwistCodeRedemptionBanner\n  ...CodedSection\n  ...GridSectionData\n  ...StickyCTAData\n  ...AudioSectionData\n  ...MotionSidekick1x1Data\n  ...ImageTransitionSliderData\n  ...ImageXrayViewerData\n  ...PollsSectionData\n  ...ArtNavigationData\n  ...MotionBanner16x9Data\n  ...QuickLinksAdvancedData\n  ...ArticleSectionData\n  ...RelatedArticleSectionData\n  ...FeatureExplorerSectionData\n  ...IdeaGeneratorSectionData\n  ...TabbedContentExplorerData\n  ...CustomProductCarousel_UniqueFields\n  ...CustomProductCarousel_ItemFields\n  ...CardContentRTWData\n  ...ExpandedCardContentData\n  ...ArticleTextData\n  ...ArticleImageSectionData\n  ...ExpandedProductLeafData\n  ...NinetiethAnniversaryExperienceData\n  ...ArticleGroupSectionData\n  ...MotionBannerSectionData\n  ...AdvancedProductHeroBannerSectionData\n  ...PlayTypeDetectorSectionData\n  ...SocialShareSectionData\n  ...EcosystemJourneyStarterData\n  ...ResultsBannerSectionData\n  ...CharacterExplorerSectionData\n  ...SubmissionFormBannerSectionData\n  ...MinifigureCustomiserSectionData\n  ...PromotionSectionData\n  ...StaticHeroData\n  ...TabbedStaticHeroData\n  ...VideoPlayerData\n  ...SKUCarouselData\n  ...TabbedSKUCarouselData\n  ...RewardListingSectionData\n  ...RewardCarouselData\n  ...RewardSectionData\n  ...AdvancedQuickLinksData\n  ...SimpleQuickLinksData\n  ...TabbedAdvancedQuickLinksData\n  ...ContentCardsData\n  ...BrickBreakerBannerData\n  ...ShoppableGalleryGridData\n}\n\nfragment CarouselContentSection on ContentSection {\n  ... on ProductCarouselSection {\n    ...ProductCarousel_UniqueFields\n    productCarouselProducts: products(\n      page: 1\n      perPage: 16\n      sort: {key: FEATURED, direction: DESC}\n    ) {\n      ...Product_ProductItem\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment CustomCarouselContentSection on ContentSection {\n  ... on CustomProductCarouselSection {\n    ...CustomProductCarousel_UniqueFields\n    productCarouselProducts: products(\n      page: 1\n      perPage: 16\n      sort: {key: FEATURED, direction: DESC}\n    ) {\n      ...CustomProductCarousel_ItemFields\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment AccordionSectionData on AccordionSection {\n  __typename\n  id\n  title\n  showTitle\n  schema\n  layout {\n    width\n    __typename\n  }\n  accordionBlocks {\n    title\n    text\n    __typename\n  }\n}\n\nfragment BreadcrumbSection on BreadcrumbSection {\n  ...BreadcrumbDynamicSection\n  __typename\n}\n\nfragment BreadcrumbDynamicSection on BreadcrumbSection {\n  breadcrumbs {\n    label\n    url\n    analyticsTitle\n    __typename\n  }\n  __typename\n}\n\nfragment ListingBannerSection on ListingBannerSection {\n  ...ListingBanner\n  __typename\n}\n\nfragment ListingBanner on ListingBannerSection {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  title\n  description\n  contrast\n  logoImage\n  backgroundImages {\n    small {\n      ...ImageAsset\n      __typename\n    }\n    medium {\n      ...ImageAsset\n      __typename\n    }\n    large {\n      ...ImageAsset\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment ImageAsset on ImageAssetDetails {\n  url\n  width\n  height\n  maxPixelDensity\n  format\n  __typename\n}\n\nfragment CategoryListingSection on CategoryListingSection {\n  ...CategoryListing\n  __typename\n}\n\nfragment CategoryListing on CategoryListingSection {\n  title\n  description\n  thumbnailImage\n  children {\n    ...CategoryLeafSection\n    __typename\n  }\n  hasCustomContent\n  __typename\n}\n\nfragment CategoryLeafSection on CategoryListingChildren {\n  title\n  description\n  thumbnailImage\n  logoImage\n  url\n  ageRange\n  tag\n  thumbnailSrc {\n    ...ImageAsset\n    __typename\n  }\n  doesNotHaveAnAboutPage\n  __typename\n}\n\nfragment CardContent on CardContentSection {\n  id\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  moduleTitle\n  showModuleTitle\n  backgroundColor\n  blocks {\n    title\n    isH1\n    description\n    textAlignment\n    primaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    secondaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    logoPosition\n    imageSrc {\n      ...ImageAsset\n      __typename\n    }\n    callToActionText\n    callToActionLink\n    callToActionUseAnalytics\n    callToActionOpenInNewTab\n    accountActionValue\n    accountActionReturnUrl\n    altText\n    contrast\n    videoMedia {\n      ...VideoAssetFragment\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment VideoAssetFragment on VideoMedia {\n  url\n  id\n  isLiveStream\n  subtitlesUrl\n  __typename\n}\n\nfragment CardCarouselContent on CardCarouselSection {\n  id\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  moduleTitle\n  showModuleTitle\n  backgroundColor\n  blocks {\n    title\n    isH1\n    description\n    textAlignment\n    primaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    secondaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    logoPosition\n    imageSrc {\n      ...ImageAsset\n      __typename\n    }\n    callToActionText\n    callToActionLink\n    callToActionUseAnalytics\n    callToActionOpenInNewTab\n    altText\n    contrast\n    videoMedia {\n      ...VideoAssetFragment\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment CopyContent on CopyContentSection {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  blocks {\n    title\n    body\n    textAlignment\n    titleColor\n    imageSrc {\n      ...ImageAsset\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment CopySectionData on CopySection {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  title\n  showTitle\n  body\n  __typename\n}\n\nfragment QuickLinksData on QuickLinkSection {\n  id\n  title\n  layout {\n    colors {\n      background\n      __typename\n    }\n    __typename\n  }\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  quickLinks {\n    title\n    isH1\n    link\n    openInNewTab\n    contrast\n    altText\n    imageSrcUrl\n    __typename\n  }\n  __typename\n}\n\nfragment ContentBlockMixedData on ContentBlockMixed {\n  id\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  moduleTitle\n  showModuleTitle\n  blocks {\n    title\n    isH1\n    description\n    backgroundColor\n    blockTheme\n    contentPosition\n    logoURL\n    secondaryLogoURL\n    logoPosition\n    callToActionText\n    callToActionLink\n    altText\n    backgroundImages {\n      largeImage {\n        small {\n          ...ImageAsset\n          __typename\n        }\n        large {\n          ...ImageAsset\n          __typename\n        }\n        __typename\n      }\n      smallImage {\n        small {\n          ...ImageAsset\n          __typename\n        }\n        large {\n          ...ImageAsset\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment UserGeneratedContentData on UserGeneratedContent {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  ugcBlock {\n    title\n    text\n    ugcType\n    ugcKey\n    __typename\n  }\n  __typename\n}\n\nfragment HeroBannerData on HeroBanner {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  heroblocks {\n    id\n    title\n    isH1\n    tagline\n    bannerTheme\n    contentVerticalPosition\n    contentHorizontalPosition\n    contentHeight\n    primaryLogoSrcNew {\n      ...ImageAsset\n      __typename\n    }\n    secondaryLogoSrcNew {\n      ...ImageAsset\n      __typename\n    }\n    videoMedia {\n      ...VideoAssetFragment\n      __typename\n    }\n    logoPosition\n    contentBackground\n    callToActionText\n    callToActionLink\n    callToActionOpenInNewTab\n    brandedAppStoreAsset {\n      ...ImageAsset\n      __typename\n    }\n    callToActionAccountAction\n    callToActionReturnUrl\n    callToActionUseAnalytics\n    secondaryCallToActionText\n    secondaryCallToActionLink\n    secondaryCallToActionAccountAction\n    secondaryCallToActionReturnUrl\n    secondaryBrandedAppStoreAsset {\n      ...ImageAsset\n      __typename\n    }\n    secondaryCallToActionUseAnalytics\n    secondaryOpenInNewTab\n    backgroundImagesNew {\n      small {\n        ...ImageAsset\n        __typename\n      }\n      medium {\n        ...ImageAsset\n        __typename\n      }\n      large {\n        ...ImageAsset\n        __typename\n      }\n      __typename\n    }\n    altText\n    showEmailSignupForm\n    __typename\n  }\n  __typename\n}\n\nfragment GalleryData on Gallery {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  galleryblocks {\n    id\n    contentHeight\n    primaryLogoSrcNew {\n      ...ImageAsset\n      __typename\n    }\n    videoMedia {\n      ...VideoAssetFragment\n      __typename\n    }\n    backgroundImagesNew {\n      small {\n        ...ImageAsset\n        __typename\n      }\n      medium {\n        ...ImageAsset\n        __typename\n      }\n      large {\n        ...ImageAsset\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment MotionBannerData on MotionBanner {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  motionBannerBlocks {\n    id\n    title\n    isH1\n    tagline\n    bannerTheme\n    contentHorizontalPosition\n    primaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    secondaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    animatedMedia\n    videoMedia {\n      ...VideoAssetFragment\n      __typename\n    }\n    logoPosition\n    contentBackground\n    callToActionText\n    callToActionLink\n    callToActionUseAnalytics\n    secondaryCallToActionText\n    secondaryCallToActionLink\n    secondaryCallToActionUseAnalytics\n    backgroundImages {\n      small {\n        ...ImageAsset\n        __typename\n      }\n      medium {\n        ...ImageAsset\n        __typename\n      }\n      large {\n        ...ImageAsset\n        __typename\n      }\n      __typename\n    }\n    altText\n    __typename\n  }\n  __typename\n}\n\nfragment MotionSidekickData on MotionSidekick {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  motionSidekickBlocks {\n    id\n    title\n    isH1\n    tagline\n    bannerTheme\n    contentHorizontalPosition\n    primaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    secondaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    animatedMedia\n    videoMedia {\n      ...VideoAssetFragment\n      __typename\n    }\n    logoPosition\n    contentBackground\n    callToActionText\n    callToActionLink\n    callToActionUseAnalytics\n    backgroundImages {\n      small {\n        ...ImageAsset\n        __typename\n      }\n      medium {\n        ...ImageAsset\n        __typename\n      }\n      large {\n        ...ImageAsset\n        __typename\n      }\n      __typename\n    }\n    altText\n    __typename\n  }\n  __typename\n}\n\nfragment InPageNavData on InPageNav {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  inPageNavBlocks {\n    id\n    title\n    isH1\n    text\n    contrast\n    primaryLogoSrc\n    secondaryLogoSrc\n    animatedMedia\n    videoMedia {\n      url\n      id\n      subtitlesUrl\n      __typename\n    }\n    contentBackground\n    backgroundImages {\n      small\n      medium\n      large\n      __typename\n    }\n    callToActionText\n    callToActionLink\n    callToActionUseAnalytics\n    openInNewTab\n    secondaryCallToActionText\n    secondaryCallToActionLink\n    secondaryCallToActionUseAnalytics\n    secondaryOpenInNewTab\n    __typename\n  }\n  __typename\n}\n\nfragment TableData on TableSection {\n  rows {\n    isHeadingRow\n    cells\n    __typename\n  }\n  __typename\n}\n\nfragment RecommendationSectionData on RecommendationSection {\n  __typename\n  title\n  showTitle\n  recommendationType\n  modelId\n  themesSection {\n    ... on CardContentSection {\n      id\n      layout {\n        width\n        colors {\n          background\n          __typename\n        }\n        __typename\n      }\n      moduleTitle\n      showModuleTitle\n      blocks {\n        title\n        isH1\n        description\n        backgroundColor\n        textAlignment\n        imageSrc {\n          url\n          width\n          height\n          maxPixelDensity\n          format\n          __typename\n        }\n        primaryLogoSrc {\n          url\n          width\n          height\n          maxPixelDensity\n          format\n          __typename\n        }\n        secondaryLogoSrc {\n          url\n          width\n          height\n          maxPixelDensity\n          format\n          __typename\n        }\n        logoPosition\n        callToActionText\n        callToActionLink\n        callToActionUseAnalytics\n        callToActionOpenInNewTab\n        altText\n        contrast\n        videoMedia {\n          url\n          id\n          isLiveStream\n          subtitlesUrl\n          __typename\n        }\n        themeId\n        __typename\n      }\n      backgroundColor\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment SidekickBannerData on SidekickBanner {\n  __typename\n  id\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  sidekickBlocks {\n    title\n    isH1\n    text\n    textAlignment\n    contrast\n    backgroundColor\n    logoSrc {\n      ...ImageAsset\n      __typename\n    }\n    secondaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    logoPosition\n    ctaTextPrimary: ctaText\n    ctaLinkPrimary: ctaLink\n    ctaOpenInNewTab\n    ctaUseAnalyticsPrimary: ctaUseAnalytics\n    brandedAppStoreAsset {\n      ...ImageAsset\n      __typename\n    }\n    ctaTextSecondary\n    ctaLinkSecondary\n    ctaOpenInNewTabSecondary\n    ctaUseAnalyticsSecondary\n    secondaryBrandedAppStoreAsset {\n      ...ImageAsset\n      __typename\n    }\n    contentHeight\n    bgImages {\n      large\n      __typename\n    }\n    videoMedia {\n      ...VideoAssetFragment\n      __typename\n    }\n    altText\n    __typename\n  }\n}\n\nfragment ProductCarousel_UniqueFields on ProductCarouselSection {\n  __typename\n  productCarouselTitle: title\n  showTitle\n  showAddToBag\n  seeAllLink\n  seeAllLinkText\n  nextAriaLabel\n  previousAriaLabel\n}\n\nfragment TextBlockData on TextBlock {\n  id\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  textBlocks {\n    title\n    isH1\n    text\n    textAlignment\n    contrast\n    backgroundColor\n    callToActionLink\n    callToActionText\n    callToActionUseAnalytics\n    openInNewTab\n    secondaryCallToActionLink\n    secondaryCallToActionText\n    secondaryCallToActionUseAnalytics\n    secondaryOpenInNewTab\n    __typename\n  }\n  __typename\n}\n\nfragment TextBlockSEOData on TextBlockSEO {\n  id\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  textBlocks {\n    title\n    text\n    __typename\n  }\n  __typename\n}\n\nfragment CrowdTwistWidgetSection on CrowdTwistWidgetSection {\n  __typename\n  id\n  heading\n  activityId\n  rewardId\n  defaultOpen\n}\n\nfragment CrowdTwistToggleWidgetSection on CrowdTwistToggleWidgetSection {\n  __typename\n  defaultOpen\n  firstStepDescription\n  firstStepHeading\n  id\n  secondStepHeading\n  heading\n  radioButtons {\n    activityId\n    buttonLabel\n    rewardId\n    __typename\n  }\n  isVipBannerVisible\n}\n\nfragment CrowdTwistCodeRedemptionBanner on CrowdTwistCodeRedemptionBanner {\n  __typename\n  heading\n  description\n  buttonText\n  inputLabel\n  campaignId\n  groupCampaignId\n  imageUrl\n}\n\nfragment CodedSection on CodedSection {\n  __typename\n  id\n  componentName\n  properties {\n    key\n    value\n    __typename\n  }\n  text {\n    key\n    value\n    __typename\n  }\n  media {\n    key\n    values {\n      id\n      contentType\n      fileSize\n      filename\n      url\n      title\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment GridSectionData on GridSection {\n  layout {\n    colors {\n      background\n      __typename\n    }\n    __typename\n  }\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  items {\n    id\n    image\n    videoMedia {\n      ...VideoAssetFragment\n      __typename\n    }\n    href\n    text\n    textContrast\n    __typename\n  }\n  __typename\n}\n\nfragment AudioSectionData on AudioSection {\n  tracks {\n    trackArt {\n      ...ImageAsset\n      __typename\n    }\n    src\n    title\n    description\n    __typename\n  }\n  backgroundColor\n  textContrast\n  backgroundImage {\n    mobile {\n      ...ImageAsset\n      __typename\n    }\n    desktop {\n      ...ImageAsset\n      __typename\n    }\n    __typename\n  }\n  seriesTitle\n  seriesThumbnail {\n    ...ImageAsset\n    __typename\n  }\n  __typename\n}\n\nfragment StickyCTAData on StickyCTASection {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  item {\n    backgroundColor\n    ctaBackgroundImage\n    ctaPosition\n    href\n    openInNewTab\n    accountAction\n    returnUrl\n    text\n    textAlign\n    textContrast\n    effect\n    delay\n    __typename\n  }\n  __typename\n}\n\nfragment MotionSidekick1x1Data on MotionSidekick1x1 {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  motionSidekickBlocks {\n    id\n    title\n    description\n    textContrast\n    contentHorizontalPosition\n    primaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    secondaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    inlineVideo {\n      ...VideoAssetFragment\n      __typename\n    }\n    fullVideo {\n      ...VideoAssetFragment\n      __typename\n    }\n    logoHorizontalPosition\n    backgroundColor\n    primaryCallToActionText\n    primaryCallToActionLink\n    primaryCallToActionUseAnalytics\n    secondaryCallToActionText\n    secondaryCallToActionLink\n    secondaryCallToActionUseAnalytics\n    __typename\n  }\n  __typename\n}\n\nfragment ImageTransitionSliderData on ImageTransitionSlider {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  imageTransitionSliderBlocks {\n    id\n    title\n    description\n    backgroundColor\n    contrast\n    ctas {\n      link\n      text\n      useAnalytics\n      __typename\n    }\n    contentHorizontalPosition\n    firstImage {\n      ...ImageAsset\n      __typename\n    }\n    firstImageFullWidth {\n      ...ImageAsset\n      __typename\n    }\n    secondImage {\n      ...ImageAsset\n      __typename\n    }\n    secondImageFullWidth {\n      ...ImageAsset\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment ImageXrayViewerData on ImageXrayViewer {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  imageXrayViewerBlocks {\n    id\n    title\n    description\n    backgroundColor\n    contrast\n    ctas {\n      link\n      text\n      useAnalytics\n      __typename\n    }\n    contentHorizontalPosition\n    firstImage {\n      ...ImageAsset\n      __typename\n    }\n    secondImage {\n      ...ImageAsset\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment PollsSectionData on PollsSection {\n  id\n  question\n  backgroundColor\n  answerFillColor\n  answerBorderColor\n  answers {\n    answer\n    id\n    __typename\n  }\n  image {\n    ...ImageAsset\n    __typename\n  }\n  imageAlignment\n  pollResults {\n    answers {\n      answerId\n      count\n      __typename\n    }\n    totalVotes\n    __typename\n  }\n  showPollResults\n  submissionConfirmationTitle\n  submissionConfirmationContent\n  __typename\n}\n\nfragment ArtNavigationData on ArtNavigation {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  artNavigationBlocks {\n    id\n    title\n    cardTitle\n    darkMode\n    callToActionLink\n    backgroundImage {\n      ...ImageAsset\n      __typename\n    }\n    logoImage {\n      ...ImageAsset\n      __typename\n    }\n    textImage {\n      ...ImageAsset\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment MotionBanner16x9Data on MotionBanner16x9 {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  motionBannerBlocks {\n    id\n    title\n    isH1\n    tagline\n    contentHorizontalPosition\n    primaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    secondaryLogoSrc {\n      ...ImageAsset\n      __typename\n    }\n    animatedMedia\n    videoMedia {\n      ...VideoAssetFragment\n      __typename\n    }\n    logoPosition\n    contentBackground\n    callToActionText\n    callToActionLink\n    callToActionUseAnalytics\n    secondaryCallToActionText\n    secondaryCallToActionLink\n    secondaryCallToActionUseAnalytics\n    altText\n    __typename\n  }\n  __typename\n}\n\nfragment QuickLinksAdvancedData on QuickLinkAdvancedSection {\n  id\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  linkCount\n  backgroundColor\n  items {\n    title\n    link\n    openInNewTab\n    contrast\n    imageSrc {\n      small {\n        ...ImageAsset\n        __typename\n      }\n      medium {\n        ...ImageAsset\n        __typename\n      }\n      __typename\n    }\n    textAlignment\n    textAlignmentVertical\n    __typename\n  }\n  __typename\n}\n\nfragment ArticleSectionData on ArticleSection {\n  id\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  articleBlocks {\n    id\n    contentTitle\n    setAsH1\n    richText\n    width\n    product {\n      ...Product_ProductItem\n      __typename\n    }\n    productAlignment\n    backgroundColor\n    contentAlignment\n    callToActionText\n    callToActionType\n    callToActionLink\n    callToActionUseAnalytics\n    openInNewTab\n    image {\n      ...ImageAsset\n      __typename\n    }\n    caption\n    captionDarkMode\n    __typename\n  }\n  __typename\n}\n\nfragment RelatedArticleSectionData on RelatedArticleSection {\n  id\n  title\n  articles {\n    id\n    title\n    description\n    url\n    image {\n      ...ImageAsset\n      __typename\n    }\n    __typename\n  }\n  backgroundColor\n  showCta\n  target {\n    text\n    href\n    __typename\n  }\n  __typename\n}\n\nfragment FeatureExplorerSectionData on FeatureExplorerSection {\n  id\n  title\n  showHeader\n  showHeaderLabel\n  backgroundGradientColors {\n    backgroundLightColor\n    backgroundDarkColor\n    __typename\n  }\n  overlayBackgroundColor\n  overlayTextColor\n  accentColor\n  logo {\n    image\n    altText\n    __typename\n  }\n  secondaryLogo {\n    image\n    altText\n    __typename\n  }\n  features {\n    title\n    text\n    scene\n    position {\n      x\n      y\n      __typename\n    }\n    video\n    image\n    __typename\n  }\n  frames\n  __typename\n}\n\nfragment IdeaGeneratorSectionData on IdeaGeneratorSection {\n  id\n  title\n  previewContent {\n    title\n    text\n    callToActionText\n    __typename\n  }\n  mainContent {\n    startText\n    retryText\n    ideaLimit\n    unlockThreshold\n    endText\n    callToAction {\n      text\n      link\n      openInNewWindow\n      __typename\n    }\n    __typename\n  }\n  problems {\n    text\n    image\n    altText\n    tags\n    __typename\n  }\n  multipliers {\n    text\n    image\n    altText\n    tags\n    __typename\n  }\n  validProblems {\n    text\n    image\n    altText\n    tags\n    __typename\n  }\n  __typename\n}\n\nfragment TabbedContentExplorerData on TabbedContentExplorerSection {\n  __typename\n  id\n  layout {\n    width\n    colors {\n      background\n      __typename\n    }\n    __typename\n  }\n  blocks {\n    title\n    backgroundColor\n    accentColor\n    target {\n      href\n      text\n      openInNewTab\n      __typename\n    }\n    images {\n      alt\n      desktop {\n        ...ImageAsset\n        __typename\n      }\n      mobile {\n        ...ImageAsset\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment CustomProductCarousel_UniqueFields on CustomProductCarouselSection {\n  __typename\n  productCarouselTitle: title\n  showTitle\n  showAddToBag\n  seeAllLink\n  seeAllLinkText\n  backgroundColor\n  nextAriaLabel\n  previousAriaLabel\n}\n\nfragment CustomProductCarousel_ItemFields on CustomProductCarouselItem {\n  product {\n    ...Product_ProductItem\n    __typename\n  }\n  imageOverride {\n    ...ImageAsset\n    __typename\n  }\n  imageBackgroundColor\n  contentBackgroundColor\n  ctaButtonColor\n  __typename\n}\n\nfragment Countdown on CountdownBannerChild {\n  title\n  isH1\n  text\n  contrast\n  backgroundColor\n  callToActionLink\n  callToActionText\n  openInNewTab\n  countdownDate\n  countdownDateFormat\n  __typename\n}\n\nfragment CountdownBannerData on CountdownBanner {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  countdownBannerBlocks {\n    ...Countdown\n    __typename\n  }\n  __typename\n}\n\nfragment CardContentRTWData on CardContentRTWSection {\n  layoutLegacy {\n    fullWidth\n    removePadding\n    __typename\n  }\n  moduleTitle\n  showModuleTitle\n  backgroundColor\n  preferCarousel\n  hasShadow\n  blocks {\n    title\n    description\n    backgroundColor\n    textAlignment\n    imageSrc {\n      ...ImageAsset\n      __typename\n    }\n    altText\n    videoMedia {\n      ...VideoAssetFragment\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment ExpandedCardContentData on ExpandedCardContentSection {\n  isStaggered\n  darkMode\n  contentOpacity\n  contentBackgroundColor\n  blocks {\n    id\n    title\n    text\n    darkMode\n    contentAlignment\n    desktopBackgroundImage {\n      ...ImageAsset\n      __typename\n    }\n    mobileBackgroundImage {\n      ...ImageAsset\n      __typename\n    }\n    target {\n      href\n      text\n      openInNewTab\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment ArticleTextData on ArticleTextSection {\n  id\n  title\n  richText\n  textAlignment\n  __typename\n}\n\nfragment ArticleImageSectionData on ArticleImageSection {\n  title\n  image {\n    ...ImageAsset\n    __typename\n  }\n  altText\n  caption\n  captionBackground\n  __typename\n}\n\nfragment ExpandedProductLeafData on ExpandedProductLeafSection {\n  id\n  productCode\n  __typename\n}\n\nfragment NinetiethAnniversaryExperienceData on NinetiethAnniversaryExperienceSection {\n  start {\n    heading\n    subHeading\n    text\n    ctaText\n    backgroundImage\n    __typename\n  }\n  charge {\n    instructionText\n    skipText\n    ctaText\n    chargeMask\n    __typename\n  }\n  end {\n    downloadButtonText\n    restartButtonText\n    straplineText\n    hashtagText\n    endScreenBackgroundTopLeft\n    endScreenBackgroundBottomRight\n    __typename\n  }\n  bricks {\n    image\n    name\n    quote\n    released\n    dimensions\n    count\n    weight\n    __typename\n  }\n  quiz {\n    instructionText\n    questionCount\n    questions {\n      text\n      image\n      swipeRightText\n      swipeLeftText\n      colorPalette {\n        background\n        question\n        card\n        topLeftImage\n        bottomRightImage\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  brickCard {\n    countLabel\n    backgroundImage\n    colors\n    dimensionsLabel\n    heading\n    releasedLabel\n    weightLabel\n    __typename\n  }\n  __typename\n}\n\nfragment ArticleGroupSectionData on ArticleGroupSection {\n  id\n  articleGroupBlocks {\n    ... on ArticleGroupImageBlock {\n      id\n      __typename\n      layout {\n        width\n        colors {\n          background\n          __typename\n        }\n        __typename\n      }\n      image {\n        ...ImageAsset\n        __typename\n      }\n      altText\n      caption\n      captionBackground\n    }\n    ... on ArticleGroupTextBlock {\n      id\n      __typename\n      layout {\n        width\n        colors {\n          background\n          __typename\n        }\n        __typename\n      }\n      textAlignment\n      richText\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment MotionBannerSectionData on MotionBannerSection {\n  id\n  title\n  isH1\n  tagline\n  bannerTheme\n  contentHorizontalPosition\n  contentVerticalPosition\n  aspectRatio\n  backgroundVideoMobile\n  backgroundVideoTablet\n  backgroundVideoDesktop\n  modalVideo {\n    ...VideoAssetFragment\n    __typename\n  }\n  backgroundImages {\n    small {\n      ...ImageAsset\n      __typename\n    }\n    medium {\n      ...ImageAsset\n      __typename\n    }\n    large {\n      ...ImageAsset\n      __typename\n    }\n    __typename\n  }\n  altText\n  primaryLogoSrc {\n    ...ImageAsset\n    __typename\n  }\n  secondaryLogoSrc {\n    ...ImageAsset\n    __typename\n  }\n  primaryCallToAction {\n    href\n    text\n    openInNewTab\n    accountAction\n    returnUrl\n    useAnalytics\n    __typename\n  }\n  secondaryCallToAction {\n    href\n    text\n    openInNewTab\n    accountAction\n    returnUrl\n    useAnalytics\n    __typename\n  }\n  logoPosition\n  __typename\n}\n\nfragment ColorPaletteColor on ColorPaletteColor {\n  designToken\n  contrastingTextColor\n  __typename\n}\n\nfragment AdvancedProductHeroBannerSectionData on AdvancedProductHeroBannerSection {\n  id\n  title\n  productCode\n  productDescriptionText\n  isAtTopOfPage\n  infoTagText\n  target {\n    href\n    text\n    __typename\n  }\n  targetKey\n  colorPalette {\n    primary {\n      ...ColorPaletteColor\n      __typename\n    }\n    secondary {\n      ...ColorPaletteColor\n      __typename\n    }\n    tertiary {\n      ...ColorPaletteColor\n      __typename\n    }\n    quaternary {\n      ...ColorPaletteColor\n      __typename\n    }\n    __typename\n  }\n  productImage {\n    desktop\n    mobile\n    alt\n    __typename\n  }\n  infoPanel {\n    text\n    alt\n    logo\n    secondaryAlt\n    secondarylogo\n    __typename\n  }\n  localizations\n  useLegacyDesign\n  displayAddToBag\n  titleSize\n  textColor\n  minifigures {\n    minifigureCount\n    minifigureImages {\n      altText\n      image\n      __typename\n    }\n    __typename\n  }\n  secondaryTarget {\n    href\n    text\n    __typename\n  }\n  secondaryTargetKey\n  primaryLogo {\n    logoName\n    altText\n    __typename\n  }\n  secondaryLogo {\n    logoName\n    altText\n    __typename\n  }\n  tags {\n    tag\n    terms\n    __typename\n  }\n  product {\n    name\n    slug\n    productCode\n    primaryImage\n    ... on SingleVariantProduct {\n      __typename\n      variant {\n        sku\n        vipPoints\n        salePercentage\n        attributes {\n          ...ProductHeroVariantAttributes\n          __typename\n        }\n        price {\n          ...ProductHeroPriceAttributes\n          __typename\n        }\n        listPrice {\n          ...ProductHeroPriceAttributes\n          __typename\n        }\n        insiderPrice {\n          formattedAmount\n          __typename\n        }\n        priceDescription\n        __typename\n      }\n    }\n    ... on ReadOnlyProduct {\n      __typename\n      readOnlyVariant {\n        sku\n        attributes {\n          ...ProductHeroVariantAttributes\n          __typename\n        }\n        __typename\n      }\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment ProductHeroVariantAttributes on ProductAttributes {\n  ageRange\n  availabilityStatus\n  availabilityText\n  canAddToBag\n  canAddToWishlist\n  featuredFlags {\n    key\n    label\n    __typename\n  }\n  isNew\n  isHardToFind\n  isExclusive\n  onSale\n  pieceCount\n  rating\n  vipAvailabilityStatus\n  vipAvailabilityText\n  vipCanAddToBag\n  maxOrderQuantity\n  __typename\n}\n\nfragment ProductHeroPriceAttributes on Price {\n  formattedAmount\n  formattedValue\n  currencyCode\n  centAmount\n  __typename\n}\n\nfragment StaticHeroData on StaticHero {\n  height\n  title\n  staticHeroAnalyticsTitle: analyticsTitle\n  isH1\n  tabTitle\n  bodyText\n  contentPositioning\n  colorPalette {\n    primary {\n      contrastingTextColor\n      designToken\n      __typename\n    }\n    __typename\n  }\n  backgroundImageDesktop\n  backgroundImageMobile\n  backgroundImageTablet\n  backgroundAltText\n  displayVideo\n  video {\n    url\n    subtitlesUrl\n    __typename\n  }\n  videoAriaLabels {\n    videoPlayAriaLabel\n    videoModalCloseButtonAriaLabel\n    __typename\n  }\n  primaryLogo {\n    logoName\n    logoAltText\n    __typename\n  }\n  secondaryLogo {\n    logoName\n    logoAltText\n    __typename\n  }\n  tags {\n    tag\n    terms\n    __typename\n  }\n  logoPositioning\n  primaryProductBadge\n  secondaryProductBadge\n  productSKU\n  primaryButtonCallToActionLink\n  primaryButtonOpenInNewTab\n  primaryButtonAccountAction\n  primaryButtonReturnUrl\n  secondaryButtonName\n  secondaryButtonCtaKey\n  secondaryButtonCallToActionLink\n  secondaryButtonOpenInNewTab\n  secondaryButtonAccountAction\n  secondaryButtonReturnUrl\n  primaryButtonName\n  primaryButtonCtaKey\n  id\n  moduleName\n  layout {\n    width\n    colors {\n      background\n      __typename\n    }\n    __typename\n  }\n  personalisationMetadata {\n    modelId\n    modelName\n    personalisationId\n    __typename\n  }\n  hotSpotLabels {\n    addToCartButtonLabel\n    closedHotSpotLabel\n    hotSpotLinkLabel\n    openedHotSpotLabel\n    pieceCountSuffix\n    __typename\n  }\n  hotSpots {\n    product {\n      id\n      name\n      productCode\n      slug\n      ... on SingleVariantProduct {\n        primaryImage\n        variant {\n          id\n          sku\n          attributes {\n            ...CommonAttributes\n            __typename\n          }\n          price {\n            ...CommonPriceAttributes\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      ... on MultiVariantProduct {\n        variants {\n          id\n          sku\n          attributes {\n            ...CommonAttributes\n            __typename\n          }\n          price {\n            ...CommonPriceAttributes\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      ... on ReadOnlyProduct {\n        readOnlyVariant {\n          id\n          sku\n          attributes {\n            ...CommonAttributes\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    analyticsTitle\n    coordinates {\n      xs {\n        ...Coordinates\n        __typename\n      }\n      sm {\n        ...Coordinates\n        __typename\n      }\n      md {\n        ...Coordinates\n        __typename\n      }\n      lg {\n        ...Coordinates\n        __typename\n      }\n      xl {\n        ...Coordinates\n        __typename\n      }\n      default {\n        ...Coordinates\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  mediaControls {\n    controlsGroup\n    play\n    pause\n    mute\n    unmute\n    volume\n    showSubtitles\n    hideSubtitles\n    enterFullscreen\n    exitFullscreen\n    skipForward\n    skipBackward\n    seeker\n    elapsedTime\n    __typename\n  }\n  __typename\n}\n\nfragment CommonAttributes on ProductAttributes {\n  ageRange\n  availabilityStatus\n  canAddToBag\n  canAddToWishlist\n  pieceCount\n  isNew\n  onSale\n  rating\n  __typename\n}\n\nfragment CommonPriceAttributes on Price {\n  formattedAmount\n  formattedValue\n  currencyCode\n  centAmount\n  __typename\n}\n\nfragment Coordinates on GridCoordinate {\n  row\n  column\n  __typename\n}\n\nfragment TabbedStaticHeroData on TabbedContent {\n  id\n  accessibleTitle\n  analyticsTitle\n  tabbedContentBackgroundColor: backgroundColor\n  colorMode\n  contentType\n  tabs {\n    __typename\n    ...StaticHeroData\n  }\n  __typename\n}\n\nfragment PlayTypeDetectorSectionData on PlayTypeDetectorSection {\n  id\n  colors {\n    answer1\n    answer2\n    cardTheme\n    cta\n    __typename\n  }\n  startStep {\n    heading\n    text\n    ctaText\n    background {\n      desktopImage\n      desktopTheme\n      mobileImage\n      mobileTheme\n      __typename\n    }\n    __typename\n  }\n  questionsStep {\n    background {\n      desktopImage\n      desktopTheme\n      mobileImage\n      mobileTheme\n      __typename\n    }\n    slider {\n      helpText\n      draggerImage\n      answer1TargetImage\n      answer1ConfirmationImage\n      answer2TargetImage\n      answer2ConfirmationImage\n      __typename\n    }\n    questions {\n      id\n      text\n      answers {\n        text\n        image\n        targetPage\n        targetQuestion\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  referralStep {\n    image\n    heading\n    text\n    __typename\n  }\n  __typename\n}\n\nfragment SocialShareSectionData on SocialShareSection {\n  id\n  title\n  sharingTitle\n  sharingBodyText\n  socialSharePlatforms\n  hashtags\n  displaySocialIcons\n  layout {\n    width\n    __typename\n  }\n  __typename\n}\n\nfragment EcosystemJourneyStarterData on EcosystemJourneyStarterSection {\n  id\n  title\n  isH1\n  icmp_tag\n  themes {\n    colors {\n      background\n      contentTitle\n      contentBackground\n      contentBodyMobile\n      contentBodyDesktop\n      navigationHighlight\n      accentLeft\n      accentRight\n      cta\n      ctaText\n      navigation\n      navigationTextColor\n      __typename\n    }\n    navigation {\n      name\n      logo\n      thumbnail\n      logoLibraryLogo {\n        logoName\n        altText\n        __typename\n      }\n      __typename\n    }\n    content {\n      image\n      altText\n      title\n      body\n      ageSuitability\n      primaryCTALabel\n      primaryCTALink\n      primaryCTAOpenInNewWindow\n      secondaryCTALabel\n      secondaryCTALink\n      secondaryCTAOpenInNewWindow\n      __typename\n    }\n    productCarousel {\n      label\n      productData {\n        data {\n          ... on SingleVariantProduct {\n            variant {\n              attributes {\n                availabilityStatus\n                __typename\n              }\n              price {\n                formattedAmount\n                __typename\n              }\n              __typename\n            }\n            name\n            primaryImage\n            slug\n            productCode\n            __typename\n          }\n          ... on ReadOnlyProduct {\n            readOnlyVariant {\n              attributes {\n                availabilityStatus\n                __typename\n              }\n              __typename\n            }\n            name\n            primaryImage\n            slug\n            productCode\n            __typename\n          }\n          ... on MultiVariantProduct {\n            name\n            primaryImage\n            slug\n            productCode\n            __typename\n          }\n          __typename\n        }\n        imageOverride\n        __typename\n      }\n      products {\n        openInNewWindow\n        __typename\n      }\n      __typename\n    }\n    tags {\n      tag\n      terms\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment ResultsBannerSectionData on ResultsBannerSection {\n  id\n  title\n  resultsBannerBackgroundColor: backgroundColor\n  fontColor\n  mobileImageLeft\n  desktopImageLeft\n  desktopImageRight\n  desktopButtonText\n  noResults {\n    noResultsText\n    ctaText\n    secondaryCta {\n      text\n      url\n      __typename\n    }\n    easterEgg {\n      heading\n      subHeading\n      easterEggImage\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment CharacterExplorerSectionData on CharacterExplorerSection {\n  id\n  title\n  backButtonLabel\n  productSubtitle\n  removeIntroScreenCtas\n  characters {\n    intro {\n      image\n      tagline\n      characterCTALabel\n      title\n      __typename\n    }\n    colors {\n      character\n      characterLabel\n      bio\n      bioLabel\n      background\n      textHighlight\n      highlightLabelDesktop\n      highlightLabelMobile\n      productBackground\n      productLabel\n      __typename\n    }\n    characterProduct {\n      title\n      overrideImage\n      code\n      __typename\n    }\n    content {\n      body\n      displayCharacterName\n      header\n      bioImage\n      mobileNavigationLabels\n      passions {\n        icon\n        value\n        __typename\n      }\n      __typename\n    }\n    nonShoppableContent {\n      image\n      text\n      mobileNavigationLabelRight\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment SubmissionFormBannerSectionData on SubmissionFormBannerSection {\n  id\n  title\n  layout {\n    width\n    colors {\n      background\n      __typename\n    }\n    __typename\n  }\n  bannerContent {\n    title\n    body\n    backgroundImageSmall\n    backgroundImageMedium\n    backgroundImageLarge\n    backgroundColorMobile\n    fontColor\n    video\n    primaryCTALabel\n    secondaryCTALabel\n    __typename\n  }\n  modalContent {\n    formId\n    closeLabel\n    title\n    description\n    fields {\n      fieldId\n      type\n      label\n      placeholderText\n      errorText\n      options {\n        value\n        label\n        __typename\n      }\n      __typename\n    }\n    fileUploadParams {\n      maxSizeInMb\n      allowedFileExtensions\n      __typename\n    }\n    termsAndConditionsLabel\n    termsAndConditions\n    termsAndConditionsFile\n    termsAndConditionsDownloadLabel\n    consentLabel\n    additionalConsentLabel\n    submitButtonLabel\n    __typename\n  }\n  successMessageContent {\n    title\n    body\n    additionalContent\n    ctaLabel\n    ctaIcon\n    ctaLink\n    __typename\n  }\n  translations {\n    key\n    value\n    __typename\n  }\n  __typename\n}\n\nfragment MinifigureCustomiserSectionData on MinifigureCustomiserSection {\n  id\n  layout {\n    width\n    colors {\n      background\n      __typename\n    }\n    containerType\n    removePadding\n    backgroundColor\n    __typename\n  }\n  content {\n    common {\n      backButtonText\n      backgroundColor\n      minifigImageAltText\n      flareImage\n      __typename\n    }\n    bannerStep {\n      title\n      body\n      ctaText\n      foregroundImageMobile\n      foregroundImageDesktop\n      __typename\n    }\n    customiseStep {\n      closeButtonText\n      finishButtonText\n      traySections {\n        head {\n          label\n          active\n          inactive\n          options\n          __typename\n        }\n        hair {\n          label\n          active\n          inactive\n          options\n          __typename\n        }\n        beard {\n          label\n          active\n          inactive\n          options\n          __typename\n        }\n        torso {\n          label\n          active\n          inactive\n          options\n          __typename\n        }\n        legs {\n          label\n          active\n          inactive\n          options\n          __typename\n        }\n        crutches {\n          label\n          active\n          inactive\n          options\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    confirmStep {\n      flipButtonText\n      rearCardTitle\n      rearCardBody\n      rearCardCTAText\n      rearCardCTALink\n      downloadCTAText\n      shareCTAText\n      restartCTAText\n      hashtagText\n      rearCardImage\n      frontCardImage\n      __typename\n    }\n    minifigLayers {\n      hair {\n        color\n        colorLabel\n        images\n        __typename\n      }\n      beard {\n        color\n        colorLabel\n        images\n        __typename\n      }\n      head {\n        color\n        colorLabel\n        image\n        __typename\n      }\n      torso\n      legs\n      face\n      crutches\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment PromotionSectionData on PromotionSection {\n  id\n  isExpanded\n  backgroundColorPalette: backgroundColor {\n    ...ColorPaletteColor\n    __typename\n  }\n  accentTextColorPalette: accentTextColor {\n    ...ColorPaletteColor\n    __typename\n  }\n  __typename\n}\n\nfragment VideoPlayerData on VideoPlayerSection {\n  id\n  title\n  isH1\n  videoPlayerBackgroundColor: backgroundColor\n  contrastColor\n  colorMode\n  playlists {\n    title\n    videoCount\n    videos {\n      title\n      description\n      duration\n      videoFormats {\n        quality\n        url\n        __typename\n      }\n      thumbnail16x9\n      thumbnail1x1\n      subtitleFile\n      sprites {\n        Url\n        TilesRows\n        TilesColumns\n        SpriteHeight\n        SpriteWidth\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  mediaControls {\n    controlsGroup\n    play\n    pause\n    mute\n    unmute\n    volume\n    showSubtitles\n    hideSubtitles\n    enterFullscreen\n    exitFullscreen\n    skipForward\n    skipBackward\n    seeker\n    elapsedTime\n    __typename\n  }\n  jsonSchema\n  __typename\n}\n\nfragment SKUCarouselData on SKUCarousel {\n  id\n  title\n  displayTitle\n  analyticsTitle\n  cta {\n    link\n    label\n    __typename\n  }\n  textColor\n  leafBackgroundColor\n  leafTextColor\n  leafFrame\n  SKUCarouselBackgroundColor: backgroundColor\n  algorithm\n  productSource\n  personalisationMetadata {\n    modelId\n    modelName\n    personalisationId\n    __typename\n  }\n  tags {\n    tag\n    terms\n    __typename\n  }\n  nextAriaLabel\n  previousAriaLabel\n  SKUCarouselProducts: products {\n    imageOverride\n    data {\n      productCode\n      primaryImage\n      listingAssets(type: IMAGE, limit: 1) {\n        id\n        url\n        tag\n        __typename\n      }\n      id\n      slug\n      name\n      secondaryImage\n      overrideUrl\n      ... on SingleVariantProduct {\n        __typename\n        variant {\n          id\n          sku\n          salePercentage\n          attributes {\n            ...SKUVariantAttributes\n            __typename\n          }\n          price {\n            ...SKUPriceAttributes\n            __typename\n          }\n          listPrice {\n            ...SKUPriceAttributes\n            __typename\n          }\n          insiderPrice {\n            formattedAmount\n            __typename\n          }\n          priceDescription\n          __typename\n        }\n      }\n      ... on MultiVariantProduct {\n        __typename\n        variants {\n          id\n          sku\n          salePercentage\n          attributes {\n            ...SKUVariantAttributes\n            __typename\n          }\n          price {\n            ...SKUPriceAttributes\n            __typename\n          }\n          listPrice {\n            ...SKUPriceAttributes\n            __typename\n          }\n          __typename\n        }\n      }\n      ... on ReadOnlyProduct {\n        __typename\n        readOnlyVariant {\n          id\n          sku\n          attributes {\n            ...SKUVariantAttributes\n            __typename\n          }\n          __typename\n        }\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment SKUVariantAttributes on ProductAttributes {\n  ageRange\n  availabilityStatus\n  availabilityText\n  canAddToBag\n  canAddToWishlist\n  featuredFlags {\n    key\n    label\n    __typename\n  }\n  isNew\n  isHardToFind\n  isExclusive\n  onSale\n  pieceCount\n  rating\n  vipAvailabilityStatus\n  vipAvailabilityText\n  vipCanAddToBag\n  __typename\n}\n\nfragment SKUPriceAttributes on Price {\n  formattedAmount\n  formattedValue\n  currencyCode\n  centAmount\n  __typename\n}\n\nfragment TabbedSKUCarouselData on TabbedContent {\n  id\n  tabbedContentTitle: title\n  titleAlignment\n  accessibleTitle\n  analyticsTitle\n  tabbedContentBackgroundColor: backgroundColor\n  colorMode\n  contentType\n  tabs {\n    __typename\n    ...SKUCarouselData\n  }\n  __typename\n}\n\nfragment RewardListingSectionData on RewardListingSection {\n  __typename\n  id\n  title\n}\n\nfragment RewardCarouselData on RewardCarouselV2 {\n  __typename\n  id\n  title\n  showTitle\n  analyticsTitle\n  backgroundColor\n  textColor\n  leafBackgroundColor\n  leafTextColor\n  leafFrame\n  nextAriaLabel\n  previousAriaLabel\n  cta {\n    label\n    link\n    __typename\n  }\n  rewards {\n    ... on RewardV4 {\n      id\n      title\n      rewardId\n      description\n      images {\n        id\n        url\n        listingDimensions {\n          width\n          height\n          __typename\n        }\n        __typename\n      }\n      startDate\n      endDate\n      pointValue\n      restrictedInCountry\n      type\n      quantity\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment RewardSectionData on RewardSection {\n  __typename\n  id\n  title\n  sectionOpen\n  rewards {\n    id\n    title\n    pointValue\n    rewardId\n    restrictedInCountry\n    type\n    images {\n      ...RewardImageAssetDetails\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment RewardImageAssetDetails on RewardImageAssetDetails {\n  id\n  url\n  listingDimensions {\n    ...Dimensions\n    __typename\n  }\n  __typename\n}\n\nfragment Dimensions on Dimensions {\n  width\n  height\n  __typename\n}\n\nfragment AdvancedQuickLinksData on QuickLinkWrapper {\n  id\n  title\n  titlePosition\n  analyticsTitle\n  advancedQuickLinksBackgroundColor: backgroundColor\n  titleColor\n  cardLayout\n  quickLinksList {\n    ... on AdvancedQuickLink {\n      id\n      image\n      label\n      labelColor\n      link\n      labelPositionHorizontal\n      labelPositionVertical\n      analyticsTitle\n      tags {\n        tag\n        terms\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  contentType\n  tags {\n    tag\n    terms\n    __typename\n  }\n  __typename\n}\n\nfragment SimpleQuickLinksData on QuickLinkWrapper {\n  id\n  title\n  titlePosition\n  analyticsTitle\n  simpleQuickLinksBackgroundColor: backgroundColor\n  titleColor\n  cardLayout\n  quickLinksList {\n    ... on SimpleQuickLink {\n      id\n      image\n      label\n      link\n      analyticsTitle\n      tags {\n        tag\n        terms\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  contentType\n  tags {\n    tag\n    terms\n    __typename\n  }\n  __typename\n}\n\nfragment TabbedAdvancedQuickLinksData on TabbedContent {\n  id\n  tabbedContentTitle: title\n  titleAlignment\n  accessibleTitle\n  analyticsTitle\n  colorMode\n  tabbedContentBackgroundColor: backgroundColor\n  contentType\n  tabs {\n    __typename\n    ...AdvancedQuickLinksData\n  }\n  __typename\n}\n\nfragment ContentCardsData on ContentCardWrapper {\n  id\n  title\n  analyticsTitle\n  cta {\n    label\n    link\n    __typename\n  }\n  contentCardWrapperBackgroundColor: backgroundColor\n  textColor\n  titleSize\n  contentAlignment\n  contentCardsLayout: cardLayout\n  cardsList {\n    ... on ContentCard {\n      __typename\n      id\n      image\n      altText\n      title\n      analyticsTitle\n      description\n      primaryCta {\n        label\n        link\n        __typename\n      }\n      primaryLogo {\n        logoName\n        altText\n        __typename\n      }\n      secondaryLogo {\n        logoName\n        altText\n        __typename\n      }\n      tags {\n        tag\n        terms\n        __typename\n      }\n    }\n    __typename\n  }\n  previousAriaLabel\n  nextAriaLabel\n  tags {\n    tag\n    terms\n    __typename\n  }\n  __typename\n}\n\nfragment BrickBreakerBannerData on BrickBreakerBanner {\n  id\n  topColor\n  bottomColor\n  bannerStyle\n  __typename\n}\n\nfragment ShoppableGalleryGridData on ShoppableGalleryGrid {\n  id\n  title\n  strapline\n  analyticsTitle\n  shoppableGalleryGridTextAlignment: textAlignment\n  cta {\n    label\n    link\n    __typename\n  }\n  galleryGridCardsList {\n    image\n    username\n    product {\n      name\n      productCode\n      slug\n      ... on SingleVariantProduct {\n        __typename\n        variant {\n          price {\n            formattedAmount\n            formattedValue\n            currencyCode\n            centAmount\n            __typename\n          }\n          __typename\n        }\n      }\n      ... on MultiVariantProduct {\n        __typename\n        variants {\n          price {\n            formattedAmount\n            formattedValue\n            currencyCode\n            centAmount\n            __typename\n          }\n          __typename\n        }\n      }\n      ... on ReadOnlyProduct {\n        __typename\n      }\n      __typename\n    }\n    closedHotSpotLabel\n    openedHotSpotLabel\n    __typename\n  }\n  tags {\n    tag\n    terms\n    __typename\n  }\n  __typename\n}\n\nfragment ProductDetails_Product on Product {\n  id\n  productCode\n  name\n  slug\n  metaTitle\n  metaDescription\n  noIndexTag\n  nextStockDropDate\n  ... on SingleVariantProduct {\n    variant {\n      ...Variant_ProductDetails\n      __typename\n    }\n    __typename\n  }\n  ... on MultiVariantProduct {\n    vipPointsRange\n    variants {\n      ...Variant_ProductDetails\n      __typename\n    }\n    __typename\n  }\n  ... on ReadOnlyProduct {\n    readOnlyVariant {\n      attributes {\n        pieceCount\n        buildHeight\n        buildWidth\n        buildDepth\n        minifigureCount\n        ageRange\n        hideBuildingInstructions\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  socialImage: primaryImage(size: HIRES)\n  __typename\n}\n\nfragment Variant_ProductDetails on ProductVariant {\n  vipPoints\n  previousFullPriceDate\n  payPalPayLater {\n    message\n    ctaUrl\n    ctaLabel\n    impressionUrl\n    __typename\n  }\n  attributes {\n    availabilityStatus\n    availabilityText\n    vipAvailabilityStatus\n    vipAvailabilityText\n    canAddToBag\n    vipCanAddToBag\n    ageRange\n    pieceCount\n    buildHeight\n    buildWidth\n    buildDepth\n    minifigureCount\n    headlineText\n    isNew\n    onSale\n    rating\n    hideBuildingInstructions\n    vipEarlyAccess\n    vipEarlyAccessStartDate\n    vipEarlyAccessDateText\n    __typename\n  }\n  __typename\n}\n\nfragment ProductFeatures_Product on Product {\n  id\n  productCode\n  featuresPrimaryImage: primaryImage(size: HIRES)\n  productMedia {\n    items {\n      id\n      __typename\n    }\n    __typename\n  }\n  name\n  description\n  secondaryImage(size: THUMBNAIL)\n  featuresText\n  ... on SingleVariantProduct {\n    variant {\n      ...Variant_ProductFeatures\n      __typename\n    }\n    __typename\n  }\n  ... on MultiVariantProduct {\n    variants {\n      ...Variant_ProductFeatures\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment Variant_ProductFeatures on ProductVariant {\n  attributes {\n    canAddToBag\n    bulletText\n    __typename\n  }\n  images {\n    url\n    __typename\n  }\n  __typename\n}\n\nfragment ProductUgc_Product on Product {\n  id\n  ... on SingleVariantProduct {\n    ugcBlock {\n      text\n      ugcType\n      ugcKey\n      __typename\n    }\n    __typename\n  }\n  ... on MultiVariantProduct {\n    ugcBlock {\n      text\n      ugcType\n      ugcKey\n      __typename\n    }\n    __typename\n  }\n  ... on ReadOnlyProduct {\n    ugcBlock {\n      text\n      ugcType\n      ugcKey\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment ProductOverview_Product on Product {\n  id\n  name\n  productCode\n  metaTitle\n  productCategories {\n    name\n    url\n    key\n    __typename\n  }\n  brandCategory {\n    url\n    name\n    logoUrl\n    __typename\n  }\n  ... on ReadOnlyProduct {\n    color\n    readOnlyVariant {\n      id\n      sku\n      attributes {\n        ...ProductAttributes_SafetyWarning\n        featuredFlags {\n          key\n          label\n          __typename\n        }\n        __typename\n      }\n      thirdPartyRetailers {\n        ...ProductOverview_ThirdPartyRetailer\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  ... on SingleVariantProduct {\n    color\n    variant {\n      ...Variant_ProductOverview\n      __typename\n    }\n    __typename\n  }\n  ... on MultiVariantProduct {\n    multiVariantType\n    color\n    priceRange {\n      formattedPriceRange\n      formattedListPriceRange\n      __typename\n    }\n    variants {\n      ...Variant_ProductOverview\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment Variant_ProductOverview on ProductVariant {\n  id\n  sku\n  price {\n    centAmount\n    formattedAmount\n    __typename\n  }\n  listPrice {\n    centAmount\n    formattedAmount\n    formattedValue\n    __typename\n  }\n  insiderPrice {\n    formattedAmount\n    __typename\n  }\n  priceDescription\n  salePercentage\n  attributes {\n    canAddToBag\n    vipCanAddToBag\n    canAddToWishlist\n    availabilityStatus\n    availabilityText\n    vipAvailabilityStatus\n    vipAvailabilityText\n    onSale\n    rating\n    maxOrderQuantity\n    skuSelectorValue\n    showStoreInventory\n    showReviews\n    bisNotificationState\n    ...ProductAttributes_Flags\n    ...ProductAttributes_SafetyWarning\n    __typename\n  }\n  promo {\n    ...TargetedPromotionSection\n    __typename\n  }\n  promos {\n    ...TargetedPromotionSection\n    __typename\n  }\n  __typename\n}\n\nfragment TargetedPromotionSection on PromotionTargeter {\n  section {\n    text\n    countdownDate\n    callToActionText\n    callToActionLink\n    tooltipText\n    imageSrc {\n      ...ImageAsset\n      __typename\n    }\n    promotionType\n    __typename\n  }\n  fetchOnClient\n  testId\n  variantId\n  inExperimentAudience\n  __typename\n}\n\nfragment ProductOverview_ThirdPartyRetailer on ThirdPartyRetailer {\n  name\n  logoImage {\n    ...ImageAsset\n    __typename\n  }\n  url\n  __typename\n}\n\nfragment ProductAttributes_SafetyWarning on ProductAttributes {\n  safetyWarning {\n    key\n    label\n    showSafetyImage\n    imageKey\n    __typename\n  }\n  __typename\n}\n\nfragment ProductMediaViewer_Media on Product {\n  ... on SingleVariantProduct {\n    variant {\n      ...Attributes\n      __typename\n    }\n    __typename\n  }\n  ... on MultiVariantProduct {\n    variants {\n      ...Attributes\n      __typename\n    }\n    __typename\n  }\n  mediaViewerPrimaryImage: primaryImage(size: HIRES)\n  productCode\n  productMedia {\n    items {\n      ...ProductMediaItem\n      __typename\n    }\n    mediaControls {\n      controlsGroup\n      play\n      pause\n      mute\n      unmute\n      volume\n      showSubtitles\n      hideSubtitles\n      enterFullscreen\n      exitFullscreen\n      skipForward\n      skipBackward\n      seeker\n      elapsedTime\n      __typename\n    }\n    __typename\n  }\n  experimentMedia {\n    items {\n      ...ProductMediaItem\n      __typename\n    }\n    __typename\n  }\n  productMediaAssets {\n    ...ProductMediaAssetItem\n    __typename\n  }\n  experimentMediaAssets {\n    ...ProductMediaAssetItem\n    __typename\n  }\n  __typename\n}\n\nfragment Attributes on ProductVariant {\n  attributes {\n    rating\n    ...ProductAttributes_Flags\n    __typename\n  }\n  __typename\n}\n\nfragment ProductMediaItem on ProductMedia {\n  id\n  ... on ProductImage {\n    ...ProductZoomableImage\n    __typename\n  }\n  ... on ProductVideo {\n    ...VideoMedia\n    __typename\n  }\n  __typename\n}\n\nfragment VideoMedia on ProductVideo {\n  video {\n    url\n    thumbnailUrl\n    __typename\n  }\n  __typename\n}\n\nfragment ProductZoomableImage on ProductImage {\n  baseImgUrl\n  sizes {\n    desktop {\n      url\n      thumbnailUrl\n      highResUrl\n      fullscreenUrl\n      __typename\n    }\n    mobile {\n      url\n      thumbnailUrl\n      highResUrl\n      fullscreenUrl\n      __typename\n    }\n    tablet {\n      url\n      thumbnailUrl\n      highResUrl\n      fullscreenUrl\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment ProductMediaAssetItem on ProductMediaAsset {\n  ... on ProductAssetImage {\n    id\n    url\n    defaultDimensions {\n      ...DimensionFragment\n      __typename\n    }\n    fullscreenDimensions {\n      ...DimensionFragment\n      __typename\n    }\n    highResDimensions {\n      ...DimensionFragment\n      __typename\n    }\n    thumbnailDimensions {\n      ...DimensionFragment\n      __typename\n    }\n    __typename\n  }\n  ... on ProductVideo {\n    id\n    video {\n      url\n      thumbnailUrl\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment DimensionFragment on ProductAssetImageDimensions {\n  width {\n    ...DeviceSizeFragment\n    __typename\n  }\n  height {\n    ...DeviceSizeFragment\n    __typename\n  }\n  __typename\n}\n\nfragment DeviceSizeFragment on DevicesSize {\n  default\n  desktop\n  tablet\n  mobile\n  __typename\n}",
        }

    def _fetch(self):
        try:
            headers = self._get_headers()
            json_data = self._get_data()
            response = requests.post(
                "https://www.lego.com/api/graphql/ProductDetails",
                json=json_data,
                headers=headers,
            )
            response.raise_for_status()
            return response.json()
        except requests.exceptions.RequestException as e:
            logging.error(f"Scrape failed: {e}")
            return None

    @staticmethod
    def _parse_response(response_data):
        def _parse_image(image_data):
            return Image(url=image_data.get("baseImgUrl", "N/A"))

        def _parse_category(category_data):
            return Category(
                name=category_data["name"],
                key=category_data["key"],
                url=category_data["url"],
            )

        return Product(
            pid=response_data["productCode"],
            name=response_data["name"],
            slug=response_data["slug"],
            description=response_data["metaDescription"],
            next_stock_drop_date=response_data["nextStockDropDate"],
            color=response_data["color"],
            categorys=[
                _parse_category(category_data)
                for category_data in response_data["productCategories"]
            ],
            price=response_data["variant"]["price"]["formattedAmount"],
            sale_percentage=response_data["variant"]["salePercentage"],
            images=[
                _parse_image(image_data)
                for image_data in response_data["productMedia"]["items"]
            ],
            brand=Brand(name=response_data['brandCategory']['name'], logo=response_data['brandCategory']['logoUrl'])
        )

    def scrape_data(self):
        data = self._fetch()
        if data is None:
            return None
        parsed_data = self._parse_response(data["data"]["product"])
        return parsed_data


scraper = Scraper("76968")

print(scraper.scrape_data())
